# semantic-java

æ­¡è¿ä½¿ç”¨ `semantic-java` åº«ï¼ğŸš€ æ­¤åº«æ—¨åœ¨ç°¡åŒ– Java ä¸­é›†åˆçš„æ“ä½œï¼Œæä¾›äº†ä¸€ç³»åˆ—åŠŸèƒ½å¼·å¤§çš„å·¥å…·ï¼Œé©ç”¨æ–¼æ•¸æ“šåˆ†æã€æµè™•ç†ç­‰å ´æ™¯ã€‚ç„¡è«–ä½ éœ€è¦é€²è¡Œçµ±è¨ˆåˆ†æã€è™•ç†æœ‰åºæˆ–ç„¡åºé›†åˆï¼Œé‚„æ˜¯éœ€è¦è‡ªå®šç¾©ç”Ÿæˆå™¨ï¼Œ`semantic-java` éƒ½èƒ½æ»¿è¶³ä½ çš„éœ€æ±‚ã€‚

## æ¦‚è¿°

`semantic-java` åº«é€éæä¾›é«˜å±¤æ¬¡çš„æŠ½è±¡å’Œå¯¦ç”¨å·¥å…·ï¼Œç°¡åŒ–äº†è¤‡é›œçš„é›†åˆæ“ä½œã€‚å®ƒçµåˆäº†å‡½æ•¸å¼ç·¨ç¨‹çš„ç‰¹æ€§ï¼Œæä¾›äº†ç°¡æ½”ä¸”è¡¨é”åŠ›å¼·çš„ APIã€‚

## ä¸»è¦ç‰¹æ€§

- **çµ±è¨ˆåˆ†æ**ï¼šæ”¯æ´å‡å€¼ã€ä¸­ä½æ•¸ã€çœ¾æ•¸ã€è®Šç•°æ•¸ç­‰å¤šç¨®çµ±è¨ˆè¨ˆç®—ã€‚
- **æœ‰åºå’Œç„¡åºé›†åˆ**ï¼šè™•ç†æœ‰ç‰¹å®šé †åºæˆ–ç„¡é †åºç´„æŸçš„é›†åˆã€‚
- **æµè™•ç†**ï¼šæä¾›é¡ä¼¼æ–¼ Java Streams çš„æµæš¢ APIï¼Œä½†åŠŸèƒ½æ›´è±å¯Œã€‚
- **è‡ªå®šç¾©ç”Ÿæˆå™¨**ï¼šå…è¨±å®šç¾©è‡ªå®šç¾©ç”Ÿæˆå™¨ä»¥ç”¢ç”Ÿå…ƒç´ åºåˆ—ã€‚

## API æ–‡ä»¶

ä»¥ä¸‹æ˜¯ `semantic-java` åº«ä¸­ä¸»è¦ API çš„è©³ç´°ä»‹ç´¹åŠä½¿ç”¨ç¯„ä¾‹ã€‚

### 1. Collectable<E>

`Collectable` é¡æ˜¯åº«çš„æ ¸å¿ƒï¼Œæä¾›äº†åŸºæ–¼ä¸åŒæ¢ä»¶çš„å…ƒç´ æ”¶é›†æ–¹æ³•ã€‚

#### æ–¹æ³•ï¼š

- `anyMatch(Predicate<E> predicate)`ï¼šå¦‚æœä»»æ„å…ƒç´ ç¬¦åˆçµ¦å®šæ¢ä»¶ï¼Œè¿”å› `true`ã€‚
- `allMatch(Predicate<E> predicate)`ï¼šå¦‚æœæ‰€æœ‰å…ƒç´ éƒ½ç¬¦åˆçµ¦å®šæ¢ä»¶ï¼Œè¿”å› `true`ã€‚
- `noneMatch(Predicate<E> predicate)`ï¼šå¦‚æœæ²’æœ‰å…ƒç´ ç¬¦åˆçµ¦å®šæ¢ä»¶ï¼Œè¿”å› `true`ã€‚
- `count()`ï¼šè¿”å›å…ƒç´ çš„æ•¸é‡ã€‚
- `findFirst()`ï¼šè¿”å›ç¬¬ä¸€å€‹å…ƒç´ çš„ `Optional` å°è±¡ã€‚
- `findAny()`ï¼šè¿”å›ä»»æ„ä¸€å€‹å…ƒç´ çš„ `Optional` å°è±¡ã€‚
- `forEach(BiConsumer<E, Long> consumer)`ï¼šå°æ¯å€‹å…ƒç´ åŸ·è¡Œæ“ä½œã€‚
- `groupBy(Function<E, K> keyExtractor)`ï¼šæ ¹æ“šéµæå–å™¨å°å…ƒç´ é€²è¡Œåˆ†çµ„ã€‚
- `join(String delimiter)`ï¼šå°‡å…ƒç´ é€£æ¥æˆä¸€å€‹å­—ä¸²ï¼Œä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦ã€‚
- `print(OutputStream stream)`ï¼šå°‡å…ƒç´ åˆ—å°åˆ°æŒ‡å®šçš„è¼¸å‡ºæµã€‚
- `reduce(BinaryOperator<E> operator)`ï¼šä½¿ç”¨çµ¦å®šçš„é‹ç®—å­å°å…ƒç´ é€²è¡Œæ­¸ç´ã€‚
- `toList()`ï¼šå°‡é›†åˆè½‰æ›ç‚º `List`ã€‚
- `toMap(Function<E, K> keyExtractor, Function<E, V> valueExtractor)`ï¼šå°‡é›†åˆè½‰æ›ç‚º `Map`ã€‚

#### ç¯„ä¾‹ç”¨æ³•ï¼š

```java
Collectable<Integer> collectable = new Collectable<>(generator);
boolean hasEven = collectable.anyMatch(n -> n % 2 == 0);
System.out.println("å­˜åœ¨å¶æ•¸: " + hasEven);
```

### 2. Collector<A, E, R>

`Collector` é¡ç”¨æ–¼å°‡å…ƒç´ ç´¯ç©åˆ°ä¸€å€‹å¯è®Šçš„çµæœå®¹å™¨ä¸­ã€‚

#### æ–¹æ³•ï¼š

- `collect(Generator<E> generator)`ï¼šå¾ç”Ÿæˆå™¨æ”¶é›†å…ƒç´ ã€‚
- `collect(Iterable<E> iterable)`ï¼šå¾å¯è¿­ä»£ç‰©ä»¶æ”¶é›†å…ƒç´ ã€‚
- `collect(E[] elements)`ï¼šå¾é™£åˆ—æ”¶é›†å…ƒç´ ã€‚

#### ç¯„ä¾‹ç”¨æ³•ï¼š

```java
Collector<Integer, Integer, Integer> collector = Collector.full(0, (acc, elem) -> acc + elem, Integer::sum);
int sum = collector.collect(generator);
System.out.println("ç¸½å’Œ: " + sum);
```

### 3. Statistics<E, D extends Number>

`Statistics` é¡æä¾›äº†è¨ˆç®—çµ±è¨ˆåº¦é‡çš„æ–¹æ³•ã€‚

#### æ–¹æ³•ï¼š

- `mean()`ï¼šè¨ˆç®—å…ƒç´ çš„å¹³å‡å€¼ã€‚
- `median()`ï¼šè¨ˆç®—å…ƒç´ çš„ä¸­ä½æ•¸ã€‚
- `mode()`ï¼šè¨ˆç®—å…ƒç´ çš„çœ¾æ•¸ã€‚
- `variance()`ï¼šè¨ˆç®—å…ƒç´ çš„è®Šç•°æ•¸ã€‚
- `standardDeviation()`ï¼šè¨ˆç®—å…ƒç´ æ¨™æº–å·®ã€‚

#### ç¯„ä¾‹ç”¨æ³•ï¼š

```java
Statistics<Integer, Double> stats = new IntegerStatistics<>(generator);
double average = stats.mean();
System.out.println("å¹³å‡æ•¸: " + average);
```

### 4. OrderedCollectable<E>

`OrderedCollectable` é¡æ“´å±•äº† `Collectable`ï¼Œæä¾›äº†è™•ç†æœ‰åºé›†åˆçš„æ–¹æ³•ã€‚

#### æ–¹æ³•ï¼š

- `sorted()`ï¼šå°å…ƒç´ é€²è¡Œæ’åºã€‚
- `sorted(Comparator<E> comparator)`ï¼šä½¿ç”¨çµ¦å®šçš„æ¯”è¼ƒå™¨å°å…ƒç´ é€²è¡Œæ’åºã€‚

#### ç¯„ä¾‹ç”¨æ³•ï¼š

```java
OrderedCollectable<Integer> ordered = new OrderedCollectable<>(generator);
List<Integer> sortedList = ordered.sorted().toList();
System.out.println("æ’åºå¾Œçš„åˆ—è¡¨: " + sortedList);
```

### 5. UnorderedCollectable<E>

`UnorderedCollectable` é¡æ“´å±•äº† `Collectable`ï¼Œæä¾›äº†è™•ç†ç„¡åºé›†åˆçš„æ–¹æ³•ã€‚

#### æ–¹æ³•ï¼š

- `toUnordered()`ï¼šå°‡é›†åˆè½‰æ›ç‚ºç„¡åºè¡¨ç¤ºã€‚

#### ç¯„ä¾‹ç”¨æ³•ï¼š

```java
UnorderedCollectable<Integer> unordered = new UnorderedCollectable<>(generator);
unordered.toUnordered();
```

### 6. Window<E>

`Window` é¡æä¾›äº†å‰µå»ºæ»‘å‹•çª—å£æˆ–ç¿»æ»¾çª—å£çš„æ–¹æ³•ã€‚

#### æ–¹æ³•ï¼š

- `slide(long size, long step)`ï¼šå‰µå»ºæŒ‡å®šå¤§å°å’Œæ­¥é•·çš„æ»‘å‹•çª—å£ã€‚
- `tumble(long size)`ï¼šå‰µå»ºæŒ‡å®šå¤§å°çš„ç¿»æ»¾çª—å£ã€‚

#### ç¯„ä¾‹ç”¨æ³•ï¼š

```java
Window<Integer> window = new Window<>(generator);
Semantic<Semantic<Integer>> slidingWindow = window.slide(3, 1);
```

## èˆ‡ Java Streams çš„å°æ¯”

| ç‰¹æ€§                           | semantic-java                           | Java Streams                           |
|--------------------------------|-----------------------------------------|----------------------------------------|
| çµ±è¨ˆåˆ†æ                       | æ”¯æ´                                    | æœ‰é™ï¼ˆéœ€å€ŸåŠ©å¤–éƒ¨åº«ï¼‰                    |
| æœ‰åºå’Œç„¡åºè™•ç†                 | æ”¯æ´                                    | æœ‰é™ï¼ˆStreams é è¨­æœ‰åºï¼‰                |
| è‡ªå®šç¾©ç”Ÿæˆå™¨                   | æ”¯æ´                                    | ä¸æ”¯æ´                                  |
| çª—å£æ“ä½œ                       | æ”¯æ´ï¼ˆæ»‘å‹•çª—å£å’Œç¿»æ»¾çª—å£ï¼‰              | ä¸æ”¯æ´                                  |
| æ€§èƒ½å„ªåŒ–                       | é©ç”¨æ–¼ç‰¹å®šå ´æ™¯é€²è¡Œäº†å„ªåŒ–                  | é€šç”¨æ€§å¼·ï¼Œä½†ä¸ä¸€å®šé©ç”¨æ–¼ç‰¹å®šä»»å‹™å„ªåŒ–      |

## ç‰¹åˆ¥èªªæ˜

- **toUnordered**ï¼šè©²æ–¹æ³•ä¸è€ƒæ…®å…ƒç´ çš„é †åºï¼Œå„ªåŒ–äº†æ•ˆèƒ½ã€‚é©ç”¨æ–¼ä¸éœ€è¦ä¿æŒå…ƒç´ é †åºçš„å ´æ™¯ã€‚
- **toXXXï¼ˆå¦‚ toListã€toMapï¼‰**ï¼šé€™äº›æ–¹æ³•è€ƒæ…®äº†å…ƒç´ çš„é †åºï¼Œé©ç”¨æ–¼éœ€è¦ä¿æŒåºåˆ—çš„å ´æ™¯ã€‚
- **ç´¢å¼•æ“ä½œ**ï¼šåœ¨å‘¼å« `redirect`ã€`reverse` æˆ– `translate` å¾Œå†å‘¼å« `sorted`ï¼Œç´¢å¼•æ“ä½œå¯èƒ½æœƒå¤±æ•ˆï¼Œå› ç‚ºæ’åºæœƒè¦†è“‹é€™äº›æ“ä½œã€‚

## çµè«–

`semantic-java` æ˜¯ä¸€å€‹åŠŸèƒ½å¼·å¤§çš„ Java é›†åˆè™•ç†åº«ï¼Œçµåˆäº†å‡½æ•¸å¼ç·¨ç¨‹å’Œæ•ˆèƒ½å„ªåŒ–ã€‚ç„¡è«–æ˜¯éœ€è¦é€²è¡Œè¤‡é›œçš„çµ±è¨ˆåˆ†æã€é«˜æ•ˆè™•ç†å¤§è³‡æ–™é›†ï¼Œé‚„æ˜¯éœ€è¦æ›´å¤šå°é›†åˆçš„æ§åˆ¶ï¼Œ`semantic-java` éƒ½æä¾›äº†æ‰€éœ€çš„å·¥å…·ã€‚

æˆ‘å€‘å¸Œæœ›é€™å€‹åº«å°ä½ æœ‰å¹«åŠ©ï¼Œä¸¦æœŸå¾…ä½ çš„å›é¥‹ï¼ğŸŒŸ

---

*æœ¬ä½¿ç”¨èªªæ˜æ˜¯ä¸€å€‹èµ·é»ï¼Œéš¨è‘—åº«çš„ç™¼å±•ï¼Œæˆ‘å€‘å°‡æä¾›æ›´è©³ç´°çš„æ–‡ä»¶å’Œç¯„ä¾‹ã€‚*
