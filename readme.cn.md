# semantic-java

æ¬¢è¿ä½¿ç”¨ `semantic-java` åº“ï¼ğŸš€ è¿™ä¸ªåº“æ—¨åœ¨ç®€åŒ– Java ä¸­é›†åˆçš„å¤„ç†ï¼Œæä¾›äº†ä¸€ç³»åˆ—åŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œé€‚ç”¨äºæ•°æ®åˆ†æã€æµå¤„ç†ç­‰åœºæ™¯ã€‚æ— è®ºä½ æ˜¯éœ€è¦ç»Ÿè®¡åˆ†æã€æœ‰åºæˆ–æ— åºé›†åˆå¤„ç†ï¼Œè¿˜æ˜¯è‡ªå®šä¹‰ç”Ÿæˆå™¨ï¼Œ`semantic-java` éƒ½èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚

## æ¦‚è¿°

`semantic-java` åº“é€šè¿‡æä¾›é«˜å±‚æ¬¡çš„æŠ½è±¡å’Œå®ç”¨å·¥å…·ï¼Œç®€åŒ–äº†å¤æ‚çš„é›†åˆæ“ä½œã€‚å®ƒç»“åˆäº†å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§ï¼Œæä¾›äº†ç®€æ´ä¸”è¡¨è¾¾åŠ›å¼ºçš„ APIã€‚

## ä¸»è¦ç‰¹æ€§

- **ç»Ÿè®¡åˆ†æ**ï¼šæ”¯æŒå‡å€¼ã€ä¸­ä½æ•°ã€ä¼—æ•°ã€æ–¹å·®ç­‰å¤šç§ç»Ÿè®¡è®¡ç®—ã€‚
- **æœ‰åºå’Œæ— åºé›†åˆ**ï¼šå¤„ç†æœ‰ç‰¹å®šé¡ºåºæˆ–æ— é¡ºåºçº¦æŸçš„é›†åˆã€‚
- **æµå¤„ç†**ï¼šæä¾›ç±»ä¼¼äº Java Streams çš„æµç•… APIï¼Œä½†åŠŸèƒ½æ›´ä¸°å¯Œã€‚
- **è‡ªå®šä¹‰ç”Ÿæˆå™¨**ï¼šå…è®¸å®šä¹‰è‡ªå®šä¹‰ç”Ÿæˆå™¨ä»¥ç”Ÿæˆå…ƒç´ åºåˆ—ã€‚

## API æ–‡æ¡£

ä»¥ä¸‹æ˜¯ `semantic-java` åº“ä¸­ä¸»è¦ API çš„è¯¦ç»†ä»‹ç»åŠä½¿ç”¨ç¤ºä¾‹ã€‚

### 1. Collectable<E>

`Collectable` ç±»æ˜¯åº“çš„æ ¸å¿ƒï¼Œæä¾›äº†åŸºäºä¸åŒæ¡ä»¶çš„å…ƒç´ æ”¶é›†æ–¹æ³•ã€‚

#### æ–¹æ³•ï¼š

- `anyMatch(Predicate<E> predicate)`ï¼šå¦‚æœä»»æ„å…ƒç´ åŒ¹é…ç»™å®šæ¡ä»¶ï¼Œè¿”å› `true`ã€‚
- `allMatch(Predicate<E> predicate)`ï¼šå¦‚æœæ‰€æœ‰å…ƒç´ éƒ½åŒ¹é…ç»™å®šæ¡ä»¶ï¼Œè¿”å› `true`ã€‚
- `noneMatch(Predicate<E> predicate)`ï¼šå¦‚æœæ²¡æœ‰å…ƒç´ åŒ¹é…ç»™å®šæ¡ä»¶ï¼Œè¿”å› `true`ã€‚
- `count()`ï¼šè¿”å›å…ƒç´ çš„æ•°é‡ã€‚
- `findFirst()`ï¼šè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ çš„ `Optional` å¯¹è±¡ã€‚
- `findAny()`ï¼šè¿”å›ä»»æ„ä¸€ä¸ªå…ƒç´ çš„ `Optional` å¯¹è±¡ã€‚
- `forEach(BiConsumer<E, Long> consumer)`ï¼šå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œã€‚
- `groupBy(Function<E, K> keyExtractor)`ï¼šæ ¹æ®é”®æå–å™¨å¯¹å…ƒç´ è¿›è¡Œåˆ†ç»„ã€‚
- `join(String delimiter)`ï¼šå°†å…ƒç´ è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦ã€‚
- `print(OutputStream stream)`ï¼šå°†å…ƒç´ æ‰“å°åˆ°æŒ‡å®šçš„è¾“å‡ºæµã€‚
- `reduce(BinaryOperator<E> operator)`ï¼šä½¿ç”¨ç»™å®šçš„æ“ä½œç¬¦å¯¹å…ƒç´ è¿›è¡Œå½’çº¦ã€‚
- `toList()`ï¼šå°†é›†åˆè½¬æ¢ä¸º `List`ã€‚
- `toMap(Function<E, K> keyExtractor, Function<E, V> valueExtractor)`ï¼šå°†é›†åˆè½¬æ¢ä¸º `Map`ã€‚

#### ç¤ºä¾‹ç”¨æ³•ï¼š

```java
Collectable<Integer> collectable = new Collectable<>(generator);
boolean hasEven = collectable.anyMatch(n -> n % 2 == 0);
System.out.println("å­˜åœ¨å¶æ•°: " + hasEven);
```

### 2. Collector<A, E, R>

`Collector` ç±»ç”¨äºå°†å…ƒç´ ç´¯ç§¯åˆ°ä¸€ä¸ªå¯å˜çš„ç»“æœå®¹å™¨ä¸­ã€‚

#### æ–¹æ³•ï¼š

- `collect(Generator<E> generator)`ï¼šä»ç”Ÿæˆå™¨æ”¶é›†å…ƒç´ ã€‚
- `collect(Iterable<E> iterable)`ï¼šä»å¯è¿­ä»£å¯¹è±¡æ”¶é›†å…ƒç´ ã€‚
- `collect(E[] elements)`ï¼šä»æ•°ç»„æ”¶é›†å…ƒç´ ã€‚

#### ç¤ºä¾‹ç”¨æ³•ï¼š

```java
Collector<Integer, Integer, Integer> collector = Collector.full(0, (acc, elem) -> acc + elem, Integer::sum);
int sum = collector.collect(generator);
System.out.println("æ€»å’Œ: " + sum);
```

### 3. Statistics<E, D extends Number>

`Statistics` ç±»æä¾›äº†è®¡ç®—ç»Ÿè®¡åº¦é‡çš„æ–¹æ³•ã€‚

#### æ–¹æ³•ï¼š

- `mean()`ï¼šè®¡ç®—å…ƒç´ çš„å¹³å‡å€¼ã€‚
- `median()`ï¼šè®¡ç®—å…ƒç´ çš„ä¸­ä½æ•°ã€‚
- `mode()`ï¼šè®¡ç®—å…ƒç´ çš„ä¼—æ•°ã€‚
- `variance()`ï¼šè®¡ç®—å…ƒç´ çš„æ–¹å·®ã€‚
- `standardDeviation()`ï¼šè®¡ç®—å…ƒç´ çš„æ ‡å‡†å·®ã€‚

#### ç¤ºä¾‹ç”¨æ³•ï¼š

```java
Statistics<Integer, Double> stats = new IntegerStatistics<>(generator);
double average = stats.mean();
System.out.println("å¹³å‡å€¼: " + average);
```

### 4. OrderedCollectable<E>

`OrderedCollectable` ç±»æ‰©å±•äº† `Collectable`ï¼Œæä¾›äº†å¤„ç†æœ‰åºé›†åˆçš„æ–¹æ³•ã€‚

#### æ–¹æ³•ï¼š

- `sorted()`ï¼šå¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚
- `sorted(Comparator<E> comparator)`ï¼šä½¿ç”¨ç»™å®šçš„æ¯”è¾ƒå™¨å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚

#### ç¤ºä¾‹ç”¨æ³•ï¼š

```java
OrderedCollectable<Integer> ordered = new OrderedCollectable<>(generator);
List<Integer> sortedList = ordered.sorted().toList();
System.out.println("æ’åºåçš„åˆ—è¡¨: " + sortedList);
```

### 5. UnorderedCollectable<E>

`UnorderedCollectable` ç±»æ‰©å±•äº† `Collectable`ï¼Œæä¾›äº†å¤„ç†æ— åºé›†åˆçš„æ–¹æ³•ã€‚

#### æ–¹æ³•ï¼š

- `toUnordered()`ï¼šå°†é›†åˆè½¬æ¢ä¸ºæ— åºè¡¨ç¤ºã€‚

#### ç¤ºä¾‹ç”¨æ³•ï¼š

```java
UnorderedCollectable<Integer> unordered = new UnorderedCollectable<>(generator);
unordered.toUnordered();
```

### 6. Window<E>

`Window` ç±»æä¾›äº†åˆ›å»ºæ»‘åŠ¨çª—å£æˆ–ç¿»æ»šçª—å£çš„æ–¹æ³•ã€‚

#### æ–¹æ³•ï¼š

- `slide(long size, long step)`ï¼šåˆ›å»ºæŒ‡å®šå¤§å°å’Œæ­¥é•¿çš„æ»‘åŠ¨çª—å£ã€‚
- `tumble(long size)`ï¼šåˆ›å»ºæŒ‡å®šå¤§å°çš„ç¿»æ»šçª—å£ã€‚

#### ç¤ºä¾‹ç”¨æ³•ï¼š

```java
Window<Integer> window = new Window<>(generator);
Semantic<Semantic<Integer>> slidingWindow = window.slide(3, 1);
```

## ä¸ Java Streams çš„å¯¹æ¯”

| ç‰¹æ€§                           | semantic-java                           | Java Streams                           |
|--------------------------------|-----------------------------------------|----------------------------------------|
| ç»Ÿè®¡åˆ†æ                       | æ”¯æŒ                                    | æœ‰é™ï¼ˆéœ€å€ŸåŠ©å¤–éƒ¨åº“ï¼‰                    |
| æœ‰åºå’Œæ— åºå¤„ç†                 | æ”¯æŒ                                    | æœ‰é™ï¼ˆStreams é»˜è®¤æœ‰åºï¼‰                |
| è‡ªå®šä¹‰ç”Ÿæˆå™¨                   | æ”¯æŒ                                    | ä¸æ”¯æŒ                                  |
| çª—å£æ“ä½œ                       | æ”¯æŒï¼ˆæ»‘åŠ¨çª—å£å’Œç¿»æ»šçª—å£ï¼‰              | ä¸æ”¯æŒ                                  |
| æ€§èƒ½ä¼˜åŒ–                       | é’ˆå¯¹ç‰¹å®šåœºæ™¯è¿›è¡Œäº†ä¼˜åŒ–                  | é€šç”¨æ€§å¼ºï¼Œä½†ä¸ä¸€å®šé’ˆå¯¹ç‰¹å®šä»»åŠ¡ä¼˜åŒ–      |

## ç‰¹åˆ«è¯´æ˜

- **toUnordered**ï¼šè¯¥æ–¹æ³•ä¸è€ƒè™‘å…ƒç´ çš„é¡ºåºï¼Œä¼˜åŒ–äº†æ€§èƒ½ã€‚é€‚ç”¨äºä¸éœ€è¦ä¿æŒå…ƒç´ é¡ºåºçš„åœºæ™¯ã€‚
- **toXXXï¼ˆå¦‚ toListã€toMapï¼‰**ï¼šè¿™äº›æ–¹æ³•è€ƒè™‘äº†å…ƒç´ çš„é¡ºåºï¼Œé€‚ç”¨äºéœ€è¦ä¿æŒåºåˆ—çš„åœºæ™¯ã€‚
- **ç´¢å¼•æ“ä½œ**ï¼šåœ¨è°ƒç”¨ `redirect`ã€`reverse` æˆ– `translate` åå†è°ƒç”¨ `sorted`ï¼Œç´¢å¼•æ“ä½œå¯èƒ½ä¼šå¤±æ•ˆï¼Œå› ä¸ºæ’åºä¼šè¦†ç›–è¿™äº›æ“ä½œã€‚

## ç»“è®º

`semantic-java` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Java é›†åˆå¤„ç†åº“ï¼Œç»“åˆäº†å‡½æ•°å¼ç¼–ç¨‹å’Œæ€§èƒ½ä¼˜åŒ–ã€‚æ— è®ºæ˜¯éœ€è¦è¿›è¡Œå¤æ‚çš„ç»Ÿè®¡åˆ†æã€é«˜æ•ˆå¤„ç†å¤§æ•°æ®é›†ï¼Œè¿˜æ˜¯éœ€è¦æ›´å¤šå¯¹é›†åˆçš„æ§åˆ¶ï¼Œ`semantic-java` éƒ½æä¾›äº†æ‰€éœ€çš„å·¥å…·ã€‚

æˆ‘ä»¬å¸Œæœ›è¿™ä¸ªåº“å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œå¹¶æœŸå¾…ä½ çš„åé¦ˆï¼ğŸŒŸ

---

*æœ¬ä½¿ç”¨æŒ‡å—æ˜¯ä¸€ä¸ªèµ·ç‚¹ï¼Œéšç€åº“çš„å‘å±•ï¼Œæˆ‘ä»¬å°†æä¾›æ›´è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚*
